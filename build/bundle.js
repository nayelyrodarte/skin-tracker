(()=>{"use strict";const e=document.querySelector("body"),t=document.querySelector("form"),o=document.querySelector(".modal"),n=document.querySelector(".modal__overlay");var a;e.addEventListener("click",(function(e){c(e.target,"header__add-button")?(t.classList.add("active"),n.style.display="block"):(c(e.target,"product-card__delete-button")||c(e.target,"header__reset-button"))&&(o.style.display="block",n.style.display="block")})),e.addEventListener("click",(function(e){c(e.target,"form__close-button")?(t.classList.remove("active"),n.style.display="none"):c(e.target,"modal__cancel-button")&&(o.style.display="none",n.style.display="none")})),e.addEventListener("click",(function(e){c(e.target,"form__submit-button")&&(""===t.product_name.value||""===t.product_type.value||""===t.exp_date.value?(e.preventDefault(),t.classList.add("active"),document.querySelector(".alert").textContent="Completa todos los campos"):function(e){const t={name:e.target.form.product_name.value,type:e.target.form.product_type.value,date:e.target.form.exp_date.value.toString(),days:[]},o=document.querySelectorAll('input[type="checkbox"]');for(let e of o)e.checked&&t.days.push(e.value);!function(e){const t={method:"post",body:JSON.stringify(e),headers:{"Content-type":"application/json"}};fetch("http://localhost:8000/api/routine/",t).then((e=>(console.log("Success:",e),e.json()))).catch((e=>console.error("Error:",e)))}(t)}(e))})),e.addEventListener("click",(async function(e){let t="",a=document.querySelector(".modal__delete-button");if(c(e.target,"product-card__delete-button")){let o=e.target.parentNode.id;t=document.querySelectorAll(`[id="${o}"]`)}else c(e.target,"header__reset-button")&&(t=document.querySelectorAll(".card"));t.length&&a.addEventListener("click",(()=>{t.forEach((e=>{var t;e.remove(),t=e.id,fetch("http://localhost:8000/api/routine/"+t,{method:"delete",headers:{"Content-type":"application/json"}}).then((e=>(console.log("Success:",e),e.json()))).catch((e=>console.error("Error:",e)))})),o.style.display="none",n.style.display="none"}))})),a=function(e){const t=document.querySelectorAll(".calendar__container");e.map((e=>{e.days.map((o=>{t.forEach(((n,a)=>{if(o===n.classList[1]){const{name:n,type:c,date:r,_id:l}=e;let s=`<div class="card" id="${l}"\n          style="background-color: ${function(e){switch(e){case"monday":case"saturday":return"#4F000B";case"tuesday":case"sunday":return"#720026";case"wednesday":return"#CE4257";case"thursday":return"#FF7F51";case"friday":return"#FF9B54"}}(o)}">\n          <i class="fa fa-times-circle product-card__delete-button"></i>\n          <p>${n}</p>\n          <p>${c}</p>\n          <p>Expira ${function(e){if(null!==e){let t=/(\d{1,4})-(\d{1,2})-(\d{1,2})/,o=e.match(t);return`${o[3]}/${o[2]}/${o[1]}`}}(r)}</p>\n          </div>`;t[a].innerHTML+=s}}))}))}))},fetch("http://localhost:8000/api/routine").then((e=>e.json())).then((e=>(console.log(e),a(e),e)));const c=(e,t)=>e.classList.contains(t)})();